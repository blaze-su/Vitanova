"use strict";!function(e){e.MaskedInput=function(t){if(!t||!t.elm||!t.format)return null;if(!(this instanceof e.MaskedInput))return new e.MaskedInput(t);var n=this,r=t.elm,a=t.format,u=t.allowed||"0123456789",c=t.allowedfx||function(){return!0},i=t.separator||"/:-",o=t.typeon||"_YMDhms",s=t.onbadkey||function(){},f=t.onfilled||function(){},l=t.badkeywait||0,d=!t.hasOwnProperty("preserve")||!!t.preserve,v=!0,h=!1,b=a,p=window.addEventListener?function(e,t,n,r){e.addEventListener(t,n,void 0!==r&&r)}:window.attachEvent?function(e,t,n){e.attachEvent("on"+t,n)}:function(e,t,n){e["on"+t]=n},k=function(){for(var e=r.value.length-1;e>=0;e--)for(var t=0,n=o.length;t<n;t++)if(r.value[e]===o[t])return!1;return!0},y=function(e){try{if(e.focus(),e.selectionStart>=0)return e.selectionStart;if(document.selection){return-document.selection.createRange().moveStart("character",-e.value.length)}return-1}catch(e){return-1}},m=function(e,t){try{if(e.selectionStart)e.focus(),e.setSelectionRange(t,t);else if(e.createTextRange){var n=e.createTextRange();n.move("character",t),n.select()}}catch(e){return!1}return!0},w=function(e){var t="",n=(e=e||window.event).which,r=e.type;if(void 0!==n&&null!==n||(n=e.keyCode),void 0===n||null===n)return"";switch(n){case 8:t="bksp";break;case 46:t="keydown"===r?"del":".";break;case 16:t="shift";break;case 0:case 9:case 13:t="etc";break;case 37:case 38:case 39:case 40:t=e.shiftKey||39===e.charCode||void 0===e.charCode?String.fromCharCode(n):"etc";break;default:t=String.fromCharCode(n)}return t},g=function(e,t){e.preventDefault&&e.preventDefault(),e.returnValue=t||!1},x=function(e){var t=y(r),n=r.value,f="";switch(!0){case-1!==u.indexOf(e):if((t+=1)>a.length)return!1;for(;-1!==i.indexOf(n.charAt(t-1))&&t<=a.length;)t+=1;if(!c(e,t))return s(e),!1;f=n.substr(0,t-1)+e+n.substr(t),-1===u.indexOf(n.charAt(t))&&-1===o.indexOf(n.charAt(t))&&(t+=1);break;case"bksp"===e:if((t-=1)<0)return!1;for(;-1===u.indexOf(n.charAt(t))&&-1===o.indexOf(n.charAt(t))&&t>1;)t-=1;f=n.substr(0,t)+a.substr(t,1)+n.substr(t+1);break;case"del"===e:if(t>=n.length)return!1;for(;-1!==i.indexOf(n.charAt(t))&&""!==n.charAt(t);)t+=1;f=n.substr(0,t)+a.substr(t,1)+n.substr(t+1),t+=1;break;case"etc"===e:return!0;default:return!1}return r.value="",r.value=f,m(r,t),!1},A=function(e){if(!v)return!0;if(e=e||event,h)return g(e),!1;var t=w(e);return!!("etc"===t||e.metaKey||e.ctrlKey||e.altKey)||"bksp"!==t&&"del"!==t&&"shift"!==t&&(function(e){if(-1===u.indexOf(e)&&"bksp"!==e&&"del"!==e&&"etc"!==e){var t=y(r);return h=!0,s(e),setTimeout(function(){h=!1,m(r,t)},l),!1}return!0}(t)?x(t)?(k()&&f(),g(e,!0),!0):(k()&&f(),g(e),!1):(g(e),!1))};return n.resetField=function(){r.value=a},n.setAllowed=function(e){u=e,n.resetField()},n.setFormat=function(e){a=e,n.resetField()},n.setSeparator=function(e){i=e,n.resetField()},n.setTypeon=function(e){o=e,n.resetField()},n.setEnabled=function(e){v=e},!r.tagName||"INPUT"!==r.tagName.toUpperCase()&&"TEXTAREA"!==r.tagName.toUpperCase()?null:(d&&""!==r.value||(r.value=a),p(r,"keydown",function(e){!function(e){if(!v)return!0;if(e=e||event,h)return g(e),!1;var t=w(e);!e.metaKey&&!e.ctrlKey||"X"!==t&&"V"!==t?e.metaKey||e.ctrlKey||(""===r.value&&(r.value=a,m(r,0)),"bksp"!==t&&"del"!==t||(x(t),g(e))):g(e)}(e)}),p(r,"keypress",function(e){A(e)}),p(r,"focus",function(){b=r.value}),p(r,"blur",function(){r.value!==b&&r.onchange&&r.onchange()}),n)}}(window);